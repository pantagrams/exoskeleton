
<!DOCTYPE html>

<html>

<head>
	
    <meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta name="author" content="https://twitter.com/thepantagrams" />
    <style>
		* {
			box-sizing: border-box;
			-moz-box-sizing: border-box;	
			-webkit-box-sizing: border-box;
		}

		html {
			margin: 0;
			padding: 0;
			width: 100%;
		}

		body {
			background-color: #000000;
		}

		#padwrap {
			padding: 0;
			margin: 0;
		}
	</style>

</head>

<body/>
	<div id="padwrap"></div>
<script>

var screenWidth = window.innerWidth,
	screenHeight = window.innerHeight,
	hash=87874.39748783212,
	u_size,
	c,
	ctx,
	scalefactor;
	

////This is just for demonstration.
////Clicking on the canvas generates a new image.

setup();
draw();
c.addEventListener('click', function(event){
	thetime= new Date
	hash = thetime.getTime();
	draw();
});

////End of demonstration


function setup(){
	var cDimension, cDimension2;
	if (screenHeight>screenWidth){
		scalefactor = Math.floor(screenWidth/930);
	} else {
		scalefactor = Math.floor(screenHeight/930);
	};
	if (scalefactor<1){
		scalefactor=1;
	};
	u_size = scalefactor*930;
	cDimension = 'width="'+u_size+'px" height="'+u_size+'px"';
	cDimension2 = 'width:'+u_size+'px; height:'+u_size+'px;';
	canvas_= '<canvas id="cvs" '+cDimension+' style="margin: 0 auto; '
	canvas_ += cDimension2+' border: 0 solid #eeeeee;"></canvas>';
	document.getElementById("padwrap").innerHTML = canvas_;
	c = document.getElementById("cvs");
	ctx = c.getContext("2d");
	c.style.marginLeft = "auto";
	c.style.marginRight = "auto";
	document.body.style.textAlign = "center";
};

function mulberry32(a) {
    return function() {
      var t = a += 0x6D2B79F5;
      t = Math.imul(t ^ t >>> 15, t | 1);
      t ^= t + Math.imul(t ^ t >>> 7, t | 61);
      return ((t ^ t >>> 14) >>> 0) / 4294967296;
    }
};

function plotter(x, y, radius, start, end){
	ctx.beginPath();
	ctx.arc(x, y, radius, start, end);
	ctx.stroke();
}

function draw(){
	var rand = mulberry32(hash),
		circa1Radius=Math.floor(rand()*10),
		circa2Radius=13,
		cadence="full",
		c1=0,
		c2=0,
		c3=0,
		eqlz1 = Math.floor(rand()*100),
		eqlz2 = Math.floor(rand()*100),
		eqlz3 = Math.floor(rand()*100),
		eqlz5 = Math.floor(rand()*100),
		eqlz6 = Math.floor(rand()*100),
		eqlz4 = Math.floor(rand()*100),
		half_height = u_size/2,
		half_width = u_size/2,
		widther,
		sparsity,
		compactness = 10*scalefactor,
		center1_adjustment = 272*scalefactor,
		center2_adjustment = 48*scalefactor,
		center3_adjustment = 368*scalefactor,
		centerY1 = half_height - center1_adjustment,
		centerY2 = half_height + center2_adjustment,
		centerY3 = half_height + center3_adjustment,
		layers = Math.floor(rand()*8)+15;

	ctx.clearRect(0, 0, c.width, c.height);
	ctx.fillStyle = "#262223";
	ctx.strokeStyle = "#ffffff";
	ctx.fillRect(0, 0, c.width, c.height);
	
	if (circa1Radius>0){
		c1=1;
	};
	
	if (eqlz5 < 5){
		widther = (rand()*7)+5;
	} else {
		widther = 20;
	};

	for (var uv=1; uv<layers; uv++){
		ctx.lineWidth = (Math.floor(rand()*widther)+1)*scalefactor;
		if (eqlz6<5){
			sparsity = (rand()*5)+1;
			cadence="half";
		} else {
			sparsity = (rand()*40)+1;
		};
		
		ctx.setLineDash([
			(Math.floor(rand()*8)+1)*scalefactor, 
			(Math.floor(rand()*sparsity)+1)*scalefactor
		]);
		
		if (uv>=circa1Radius){
			ctx.beginPath();
				if (eqlz3>5 && eqlz3<=70){
					ctx.arc(
						half_width,
						centerY2,
						uv*compactness,
						1.5*Math.PI,
						0.5*Math.PI
					);
				} else if (eqlz3>70){
					ctx.arc(
						half_width,
						centerY2,
						uv*compactness, 
						0.5*Math.PI,
						1.5*Math.PI
					);
				} else {
					if (eqlz5>40){
						ctx.arc(
							half_width,
							centerY2,
							uv*compactness,
							0,
							2*Math.PI
						);
					} else if (eqlz5>20 && eqlz5<40) {
						ctx.arc(
							half_width,
							centerY2,
							uv*compactness,
							0.5*Math.PI,
							0*Math.PI
						);
						ctx.arc(
							half_width,
							centerY2,
							uv*compactness,
							0.5*Math.PI,
							1.5*Math.PI
						);
					} else {
						ctx.arc(
							half_width,
							centerY2,
							uv*compactness,
							1.5*Math.PI,
							1*Math.PI
						);
						ctx.arc(
							half_width,
							centerY2,
							uv*compactness,
							1.5*Math.PI,
							1*Math.PI
						);
					};
				};
			ctx.stroke();
		};

		if (uv>=circa1Radius && eqlz3>5 && eqlz3<=70 && (eqlz6>=5 || ( eqlz6<5 && eqlz4>=50))){
			plotter(
				half_width,
				centerY1,
				(32-uv)*compactness,
				0.5*Math.PI,
				1.5*Math.PI
			);
		} else if (uv>=circa1Radius && eqlz3>70 && (eqlz6>=5 || ( eqlz6<5 && eqlz4>=50))){
			plotter(
				half_width,
				centerY1,
				(32-uv)*compactness,
				1.5*Math.PI,
				0.5*Math.PI
			);
		};
		
		if (uv<25-circa2Radius && eqlz2>5 && eqlz5>40){
			plotter(
				half_width,
				centerY3,
				uv*compactness,
				0,
				2*Math.PI
			);
			c2 = 1;
		};
		
		
		if (uv<circa1Radius && eqlz3>5){
			plotter(
				half_width,
				centerY2,
				uv*compactness,
				0*Math.PI,
				2*Math.PI
			);
		};
		
		
		if (uv>=circa1Radius && eqlz3>5 && eqlz3<=70 && (eqlz6>=5 || ( eqlz6<5 && eqlz4<50))){
			plotter(
				half_width,
				centerY3,
				(32-uv)*compactness,
				0.5*Math.PI,
				1.5*Math.PI
			);
		} else if (uv>=circa1Radius && eqlz3>70 && (eqlz6>=5 || ( eqlz6<5 && eqlz4<50))) {
			plotter(
				half_width,
				centerY3,
				(32-uv)*compactness,
				1.5*Math.PI,
				0.5*Math.PI
			);

		};
			
		if (uv<13 && eqlz1<5  && eqlz5>40){
			plotter(
				half_width,
				centerY1,
				uv*compactness,
				0,
				2*Math.PI
			)
			c3 = 1;
		};
	};
	
	ctx.lineWidth = 200*scalefactor;
	ctx.setLineDash([0,0]);
	ctx.strokeRect(0, 0, c.width, c.height);
	ctx.strokeStyle = "#262223";
	ctx.lineWidth = 5;
	start = 80*scalefactor;
	end_factor = 160*scalefactor;
	ctx.strokeRect(start, start, c.width-end_factor, c.height-end_factor);
	ctx.strokeStyle = "#ffffff";

	return [
		{"Equalizer 1": eqlz1},
		{"Equalizer 2": eqlz2},
		{"Equalizer 3": eqlz3},
		{"Equalizer 4": eqlz4},
		{"Equalizer 5": eqlz5},
		{"Equalizer 6": eqlz6},
		{"Centroids": c1+c2+c3},
		{"Cadence": cadence},
		{"Layers": layers},
	];	
};


</script>
<body/>
