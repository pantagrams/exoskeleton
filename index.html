
<!DOCTYPE html>

<html>

<head>
	
    <meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta name="author" content="https://twitter.com/thepantagrams" />
    <style>
		* {
		box-sizing: border-box;
		-moz-box-sizing: border-box;	
		-webkit-box-sizing: border-box;
		}

		html {
			margin: 0;
			padding: 0;
			width: 100%;
		}

		body {
			background-color: #000000;
		}

		#padwrap {
			padding: 0;
			margin: 0;
		}
	</style>

</head>

<body/>
	<div id="padwrap"></div>
<script>

var screenWidth = window.innerWidth,
	screenHeight = window.innerHeight,
	u_size,
	c,
	ctx,
	scalefactor;

function setup(){
	var cDimension, cDimension2;
	if (screenHeight>screenWidth){
		scalefactor = Math.floor(screenWidth/930);
	} else {
		scalefactor = Math.floor(screenHeight/930);
	};
	if (scalefactor<1){
		scalefactor=1;
	};
	u_size = scalefactor*930;
	cDimension = 'width="'+u_size+'px" height="'+u_size+'px"';
	cDimension2 = 'width:'+u_size+'px; height:'+u_size+'px;';
	canvas_='<canvas id="cvs" '+cDimension+' style="margin: 0 auto; '+cDimension2+' border: 0 solid #eeeeee;"></canvas>';
	document.getElementById("padwrap").innerHTML = canvas_;
	c = document.getElementById("cvs");
	ctx = c.getContext("2d");
	c.style.marginLeft = "auto";
	c.style.marginRight = "auto";
	c.parentElement.style.textAlign = "center";
	c.parentElement.style.width = "100%";
	c.parentElement.style.height = (parseInt(c.style.height.slice(0,c.style.height.length-2), 10)+3).toString() + "px";
}

function mulberry32(a) {
    return function() {
      var t = a += 0x6D2B79F5;
      t = Math.imul(t ^ t >>> 15, t | 1);
      t ^= t + Math.imul(t ^ t >>> 7, t | 61);
      return ((t ^ t >>> 14) >>> 0) / 4294967296;
    }
};

function plotter(x, y, radius, start, end){
	ctx.beginPath();
	ctx.arc(x, y, radius, start, end);
	ctx.stroke();
}

function plotter_(x, y, radius, start, end){
	ctx.beginPath();
	ctx.arc(x, y, Math.floor(radius*(screenHeight/930)), start, end);
	ctx.stroke();
}

function draw(){
	var rand = mulberry32(hash),
		circa1Radius=Math.floor(rand()*10),
		circa2Radius=13,
		switch1 = Math.floor(rand()*100),
		switch2 = Math.floor(rand()*100),
		switch3 = Math.floor(rand()*100),
		switch5 = Math.floor(rand()*100),
		switch6 = Math.floor(rand()*100),
		switch7 = Math.floor(rand()*100),
		total_width = u_size,
		total_height = u_size,
		half_height = u_size/2,
		half_width = u_size/2,
		widther,
		sparsity,
		compactness = 10*scalefactor,
		center1_adjustment = 272*scalefactor,
		center2_adjustment = 48*scalefactor,
		center3_adjustment = 368*scalefactor,
		centerY1 = half_height - center1_adjustment,
		centerY2 = half_height + center2_adjustment,
		centerY3 = half_height + center3_adjustment,
		layers = Math.floor(rand()*8)+15;

	ctx.clearRect(0, 0, c.width, c.height);
	ctx.fillStyle = "#262223";
	ctx.strokeStyle = "#ffffff";
	ctx.fillRect(0, 0, c.width, c.height);
	
	if (switch5 < 5){
		widther = (rand()*10)+1;
	} else {
		widther = 20;
	};

	for (var uv=1; uv<layers; uv++){
		ctx.lineWidth = (Math.floor(rand()*widther)+1)*scalefactor;
		if (switch6<5){
			sparsity = (rand()*5)+1;
		} else {
			sparsity = (rand()*40)+1;
		};
		ctx.setLineDash([(Math.floor(rand()*8)+1)*scalefactor, (Math.floor(rand()*sparsity)+1)*scalefactor]);
		if (uv>=circa1Radius){
			ctx.beginPath();
				if (switch3>5 && switch3<=70){
					ctx.arc(half_width, centerY2, uv*compactness, 1.5*Math.PI, 0.5*Math.PI);
				} else if (switch3>70){
					ctx.arc(half_width, centerY2, uv*compactness,  0.5*Math.PI, 1.5*Math.PI);
				} else {
					if (switch5>40){
						ctx.arc(half_width, centerY2, uv*compactness,  0, 2*Math.PI)
					} else if (switch5>20 && switch5<40) {
						ctx.arc(half_width, centerY2, uv*compactness,  0.5*Math.PI, 0*Math.PI);
						ctx.arc(half_width, centerY2, uv*compactness,  0.5*Math.PI, 1.5*Math.PI);
					} else {
						ctx.arc(half_width, centerY2, uv*compactness,  1.5*Math.PI, 1*Math.PI);
						ctx.arc(half_width, centerY2, uv*compactness,  1.5*Math.PI, 1*Math.PI);
					}
				}
			ctx.stroke();
		};
				
		if (uv>=circa1Radius && switch3>5 && switch3<=70 && (switch6>=5 || ( switch6<5 && switch7>=50))){
			plotter(half_width, centerY1, (32-uv)*compactness, 0.5*Math.PI, 1.5*Math.PI);
		} else if (uv>=circa1Radius && switch3>70 && (switch6>=5 || ( switch6<5 && switch7>=50))){
			plotter(half_width, centerY1, (32-uv)*compactness, 1.5*Math.PI, 0.5*Math.PI);
		};
		
		if (uv<25-circa2Radius && switch2>5 && switch5>40){
			plotter(half_width, centerY3, uv*compactness, 0, 2*Math.PI);			
		};
		
		if (uv<circa1Radius && switch3>5){
			plotter(half_width, centerY2, uv*compactness, 0*Math.PI, 2*Math.PI);
		};
		
		if (uv>=circa1Radius && switch3>5 && switch3<=70 && (switch6>=5 || ( switch6<5 && switch7<50))){
			plotter(half_width, centerY3, (32-uv)*compactness, 0.5*Math.PI, 1.5*Math.PI);
		} else if (uv>=circa1Radius && switch3>70 && (switch6>=5 || ( switch6<5 && switch7<50))) {
			plotter(half_width, centerY3, (32-uv)*compactness, 1.5*Math.PI, 0.5*Math.PI);
		};
				
		if (uv<13 && switch1<5  && switch5>40){
			plotter(half_width, centerY1, uv*compactness, 0, 2*Math.PI)
		};
	};
	
	ctx.lineWidth = 200*scalefactor;
	ctx.setLineDash([0,0]);
	ctx.strokeRect(0, 0, c.width, c.height);
	ctx.strokeStyle = "#262223";
	ctx.lineWidth = 5;
	start = 80*scalefactor;
	end_factor = 160*scalefactor
	ctx.strokeRect(start, start, c.width-end_factor, c.height-end_factor);
	ctx.strokeStyle = "#ffffff";
}


// ------- DEMONSTRATION -------
// This portion allows a new image to generate on loading and CLICKING the canvas.
//Remove this portion and pass the hash to the draw function for production.
setup();
// ------ Hash Template for Generating Images ------
var thetime= new Date, hash = thetime.getTime();
// ------- Call function with the Hash -------
draw();
c.addEventListener('click', function(event){
	thetime= new Date
	hash = thetime.getTime();
	draw();
});

// ------- END OF DEMONSTRATION -------


</script>
<body/>
